<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="Search - https://kkkiona.github.io/search/">
    <meta name="author" content="Kiona - https://kkkiona.github.io/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>Search</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    <link rel="stylesheet" href="https://kkkiona.github.io/style.min.8c5e32fb79c371e60144e8d92e154be671c950764ac3e89b85f9edecd33c1a13.css">
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        <div id="header"><div class="container-header">
    <div id="vars" class="container-vars" style="display: none;">
	{
		"hasFoldAllCodeBlocks": false,
		"svgColor": "#6c757d",
		"en": true,
		"dark": false
	}
</div>
    <h1 class="title">
        Search
    </h1>

    <div class="container-breadcrumb-nav">
    
    <div class="breadcrumb-nav-bar">
        <div><a href="/"><svg t="1656411084410" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2954" width="16" height="16"><path d="M947.5 390.6l-377-290c-34.5-26.5-82.6-26.5-117.1 0l-377 290c-14 10.8-16.6 30.9-5.9 44.9 10.8 14 30.9 16.6 44.9 5.9l28.5-21.9V768c0 88.2 71.8 160 160 160h80c35.3 0 64-28.7 64-64V640c0-17.6 14.4-32 32-32h64c17.6 0 32 14.4 32 32v224c0 35.3 28.7 64 64 64h80c88.2 0 160-71.8 160-160V419.4l28.5 21.9c5.8 4.5 12.7 6.6 19.5 6.6 9.6 0 19.1-4.3 25.4-12.5 10.8-13.9 8.2-34-5.8-44.8zM816 768c0 52.9-43.1 96-96 96h-80V640c0-52.9-43.1-96-96-96h-64c-52.9 0-96 43.1-96 96v224h-80c-52.9 0-96-43.1-96-96V370.2l284.5-218.8c11.5-8.8 27.5-8.8 39 0L816 370.2V768z" fill=#6c757d p-id="2955"></path></svg></a></div>
        <div><a href="/nav"><svg t="1656411531924" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5827" width="16" height="16"><path d="M849.59197473 125.23018519L139.22930586 391.72854662a23.35052669 23.35052669 0 0 0-14.95414244 21.65490745c-0.12257519 9.70384955 5.61801843 18.46795771 14.40255493 22.04306141l318.42928099 129.25528056 119.51057092 320.39047893c3.06437293 8.23295069 10.35758221 13.89182751 18.7335381 14.87242563l2.7170774 0.14300521a22.79893918 22.79893918 0 0 0 21.20546682-15.36272638l259.51158924-729.54564933a23.8612558 23.8612558 0 0 0-5.31158128-24.55584682 22.3290685 22.3290685 0 0 0-23.9021142-5.43415649zM793.65694081 211.64552314l-196.63064161 552.75171747-91.91077952-246.37564122-253.62799211-102.96295445 542.16941324-203.4131218z" p-id="5828" fill=#6c757d></path></svg></a></div>
        <div><a href="/search"><svg t="1656411627509" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1730" width="14" height="14"><path d="M469.333333 85.333333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m0 682.666667c164.992 0 298.666667-133.674667 298.666667-298.666667 0-165.034667-133.674667-298.666667-298.666667-298.666666-165.034667 0-298.666667 133.632-298.666666 298.666666 0 164.992 133.632 298.666667 298.666666 298.666667z m362.026667 3.029333l120.704 120.661334-60.373333 60.373333-120.661334-120.704 60.330667-60.330667z" p-id="1731" fill=#6c757d></path></svg></a></div>
        <div><a href="/posts"><svg t="1656411724198" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5655" width="12" height="12"><path d="M811.705761 1024H212.294239c-93.1199 0-174.823046-87.570975-174.823046-187.387854V162.322018C37.471193 69.776145 112.604921 0 212.294239 0H596.190595l7.015883 5.93161c111.74388 95.479788 185.857116 170.741078 279.614824 266.093304 29.65805 30.040735 61.165743 62.122454 96.436499 97.393211l7.271006 7.334787v459.859234c-0.063781 99.816879-81.703145 187.387854-174.823046 187.387854zM212.294239 49.94033c-72.391155 0-124.882716 47.261538-124.882716 112.381688v674.290128c0 71.94469 59.507443 137.383743 124.882716 137.383743h599.411522c65.311492 0 124.882716-65.439053 124.882716-137.383743V397.417876c-32.528184-32.464404-61.73977-62.250016-89.356836-90.377328-90.951355-92.418312-163.278729-165.957521-269.601245-257.163999H212.294239z" fill=#6c757d p-id="5656"></path><path d="M936.588477 449.526752h-212.326129c-99.753099 0-187.324073-81.703145-187.324073-174.823046V49.94033a25.002055 25.002055 0 0 1 49.94033 0v224.763376c0 65.311492 65.502834 124.882716 137.383743 124.882716h212.326129a25.002055 25.002055 0 1 1 0 49.94033z" fill=#6c757d p-id="5657"></path></svg></a></div>
        <div><a href="/archive"><svg t="1656411795742" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7334" width="12" height="12"><path d="M884.224 522.24H504.32V141.824c0-16.896-13.824-30.72-30.72-30.72-120.32 0-233.472 47.616-317.952 134.144S26.112 445.952 29.184 566.784c2.56 114.688 49.152 222.72 131.072 304.128 81.92 81.408 189.952 128 304.64 130.56h10.24c117.76 0 227.84-45.568 312.32-128.512 86.528-85.504 133.632-199.68 132.608-321.024-0.512-2.048-1.536-29.696-35.84-29.696z m-140.288 307.712c-74.752 73.728-173.056 112.64-277.504 110.592-205.824-4.608-370.688-169.472-375.296-374.784-3.072-104.448 35.84-202.752 108.544-277.504 65.536-67.072 151.552-107.52 243.712-114.688v378.88c0 16.896 13.824 30.72 30.72 30.72 129.024 0 311.296 0 382.976 0.512-6.144 93.184-46.08 179.712-113.152 246.272z" fill=#6c757d p-id="7335"></path><path d="M603.136 11.264c-8.192-0.512-15.872 3.072-22.016 8.704-5.632 5.632-9.216 13.824-9.216 22.016v378.88c0 16.896 13.824 30.72 30.72 30.72h378.88c16.896 0 30.72-13.824 30.72-30.72 0-223.744-183.808-407.552-409.088-409.6z m30.208 378.88V74.24c167.424 16.384 301.056 150.016 315.904 315.904h-315.904z" fill=#6c757d p-id="7336"></path></svg></a></div>
        <div id="light-dark" style="cursor: pointer;"><a><svg t="1656411842215" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5086" width="12" height="12"><path d="M1007.492874 384.513055c-8.795694-34.58307-21.189627-67.666874-36.682043-99.05151-2.698679-5.397358-10.894667-3.498287-10.894666 2.598728v0.299853c0 32.484098-6.896624 63.868734-19.890263 92.554691-10.694764 23.488501-25.487523 45.077933-43.978471 64.068635-41.779547 42.679107-99.05151 66.967217-158.722299 67.26707-61.869712 0.299853-119.941284-24.188159-162.920244-68.966238-40.280281-41.979449-62.56937-98.251902-62.269516-156.323473 0.399804-59.270984 23.588452-114.94373 65.567901-156.823229 19.59041-19.59041 42.179351-35.082826 66.667364-46.077443C672.956643 71.166451 704.041426 64.469729 736.125719 64.469729h1.299364c6.097015 0 8.096037-8.096037 2.598728-10.794715C708.739126 37.982696 675.655322 25.488812 641.172203 16.493216 599.492607 5.598549 555.714038-0.098662 510.536154 0.001289 222.37722 0.700947-7.41029 237.38508 0.185992 525.444064c7.096526 271.667008 225.889418 490.559851 497.456474 497.856279 287.559228 7.796183 524.14341-220.891864 525.842579-508.551044 0.299853-44.977981-5.297407-88.656599-15.992171-130.236244z m-83.15929 301.552378c-22.588942 53.27392-54.873137 101.250434-95.953027 142.330323-41.179841 41.179841-89.056403 73.464036-142.330324 95.953027-55.172991 23.288599-113.744317 35.182777-174.314666 35.182777s-119.141675-11.794226-174.314666-35.182777c-53.27392-22.588942-101.250434-54.873137-142.330323-95.953027-41.179841-41.179841-73.464036-89.056403-95.953027-142.330323C75.749001 630.892442 63.954774 572.221164 63.954774 511.750767s11.794226-119.141675 35.182777-174.314666c22.588942-53.27392 54.873137-101.250434 95.953027-142.330323 41.179841-41.179841 89.056403-73.464036 142.330323-95.953027C392.593892 75.7642 451.26517 63.969974 511.735567 63.969974c13.99315 0 27.886348 0.599706 41.679596 1.89907C489.246577 118.643209 448.266638 198.704016 448.266638 288.360126c0 159.022152 128.836929 287.859081 287.859081 287.859081 89.156354 0 168.817357-40.580134 221.691473-104.149015 1.099462 13.09359 1.699168 26.387082 1.699168 39.680575 0 60.470397-11.794226 119.141675-35.182776 174.314666z" p-id="5087" fill=#6c757d></path></svg></a></div>
        
    </div>

    
</div>

    
    
</div>
</div>
        <div id="content">












<div class="post-password">
    <script>
        (function(){
            if(''){
                if (prompt('请输入文章密码') !== ''){
                    alert('密码错误！');
                    history.back();
                }
            }
        })();
    </script>
</div>

<div class="container-main 
     container-search 
    ">

    <div class="desc">
        
    </div>
    
    <div class="toc">
        
        <nav id="TableOfContents"></nav>
    </div>

    <div class='content  content '>
        
    </div>

    <div class="container-search">
    <div id="data" style="display: none;">
        
            
                [{"content":"introduction this article is the usage for the two follow github projects about the use of petsc lib.\nhttps://github.com/topopt/topopt_in_petsc https://github.com/thsmit/topopt_in_petsc_wrapped_in_python the first project will be called topopt and the second is topoptpy in the next part.\ninstallation of topopt installation to clone the topopt:\ngit clone https://github.com/topopt/topopt_in_petsc.git the main requirements are:\nlinux (tested in ubuntu-22.04.1) petsc (tested in 3.14.1 version) check how to install petsc in an other article\nafter downloading the project, you will the file named makefile_ref in the root directory. the content of it is:\npetsc_dir=xxxxxx petsc_arch=xxxxxx cflags = -i. fflags= cppflags=-i. fppflags= locdir= examplesc= examplesf= mansec= cleanfiles= np= include ${petsc_dir}/lib/petsc/conf/variables include ${petsc_dir}/lib/petsc/conf/rules include ${petsc_dir}/lib/petsc/conf/test topopt: main.o topopt.o linearelasticity.o mma.o filter.o pdefilter.o mpiio.o chkopts rm -rf topopt -${clinker} -o topopt main.o topopt.o linearelasticity.o mma.o filter.o pdefilter.o mpiio.o ${petsc_sys_lib} ${rm} main.o topopt.o linearelasticity.o mma.o filter.o pdefilter.o mpiio.o rm -rf *.o myclean: rm -rf topopt *.o output* binary* log* makevtu.pyc restart* change the petsc_dir and petsc_arch to your path (it can be found in the petsc\u0026rsquo;s configure.log). and then, change the makefile_ref name to makefile, so you can make the project after that:\nmake check all running after making, you can do the following:\nnormal compilation time of framework, e.g. 4s: make topopt -j. run the base example to generate bitwise file (.bat) by typing e.g.: mpirun -np 4 ./topopt. postprocess results using python 2.6 for visualization (.vtu): bin2vtu # where # refers to the iteration number if haven\u0026rsquo;t python2.6, using sudo apt install python2 to install.\nthe result (default name output_xxxxx.vtu) can be visualized through paraview, which can be installed by: sudo apt install paraview or download from https://www.paraview.org/. running paraview, open the output_xxxxx.vtu (file-\u0026gt;open), turn on the eye button, and select one shader.\ninstallation of topoptpy o clone the topopt:\ngit clone https://github.com/thsmit/topopt_in_petsc_wrapped_in_python.git the main requirements are:\nlinux (tested in ubuntu-22.04.1) petsc (tested in 3.14.1 version) python3 (tested in 3.10.6 version) one of the differents between topopt and topoptpy is topoptpy is managed by cmake. so before building, it need to install cmake by:\nsudo apt install cmake then, set the petsc_dir and petsc_arch path by:\nexport petsc_arch=arch-linux-c-opt export petsc_dir=/home/ts/documents/petsc and creat the build folder:\nmkdir build \u0026amp;\u0026amp; cd build at last, it can be maked:\ncmake .. -d petsc_executable_runs=on make -j $(nproc) when making the project, might meeting the error likes:\ncannot compile.link c with mpicc: /usr/bin/ld: cannot find -lmpi_cxx it means lack of depended libs. you need to use apt to install them for example:\nsudo apt search lmpi ... sudo apt install libmkl-blacs-intelmpi-ilp64 #choose the applicable version running running \u0026lsquo;hello world\u0026rsquo; example running a \u0026lsquo;hello world\u0026rsquo; example from the command line. generates standard cantilever beam and output .vtr files for viewing in paraview.\nimport topoptlib data = topoptlib.data() data.solve() the output files are named topopt_xxx.vtr, which can be read as a group by paraview same like topopt.\nrunning examples to run the cantilever beam example on one cpu (adjust the problem\u0026rsquo;s mesh according to the number of available cpu\u0026rsquo;s):\ncd topopt_in_petsc_wrapped_in_python cp examples/beam.py . python3 beam.py available examples:\ncantilever beam in beam.py multi-loads in multiloads.py torsion ball in sphere.py the jet engine bracket in bracket.py running on eth euler (without installing petsc) env2lmod module load gcc/4.8.5 cmake/3.16.5 openmpi/3.0.1 petsc/3.10.5 python/3.7.4 cd topopt_in_petsc_wrapped_in_python mkdir build cd build cmake .. make cd .. bsub -n 8 mpirun -n 8 python3 bracket.py or use run_topopt.sh for automated building and running.\nrunning tests several tests are provided to verify the proper working of the framework. to run a test using 4 cpu\u0026rsquo;s use:\ncd topopt_in_petsc_wrapped_in_python cp topoptlib/test/test_beam.py . mpirun -n 4 python3 test_beam.py implemented tests in /tests:\ntesting standard mbb problem with maxitr of 40 test_beam.py testing the standard mbb problem with two line loads test_multiload.py testing continuation of penalization test_continuation.py testing heavyside projection filtering test_projection.py testing stl readin of design domain, rigid domain test_sphere.py testing stl readin of design domain, rigid domain test_bracket.py testing the robust approach test_michell.py or use test_topopt.sh for automated building and running the tests. post-processing (easy) the framework can write .vtr files of the designs with in point data. the designs can be viewed in paraview. the point data can be transformed into cell data by using paraview\u0026rsquo;s pointtocelldata filter. to generate .vtr files add the following command to the problem definition:\nvtr(20) post-processing (original) after solving the problem the output is written to a output.dat file. the designs can be viewed in paraview. to generate .vtu files from the output file use post_process_topopt.sh with python 2 (with * the file path and name where the output file is stored):\ncd topopt_in_petsc_wrapped_in_python ./post_process_topopt.sh * ","date":"2022-12-29","permalink":"https://kkkiona.github.io/posts/topopt_in_petsc-2022-12-29/","summary":"","title":"usage of topopt_in_petsc projects"},{"content":"introduction this article will cover the installation of the petsc library, including the common installation for linux and the attempt on windows.\ninstallation for linux this article is applicable to the building of petsc-3.14.1. you can download the newest version by:\ngit clone -b release https://gitlab.com/petsc/petsc.git #if haven\u0026#39;t the git tool, you can install it through \u0026#39;apt\u0026#39;. #follow steps will show how to use \u0026#39;apt\u0026#39;. or search the applicable version through the link:\nhttps://gitlab.com/petsc/petsc\nenvironment building petsc relies on the following environments：\nubuntu (linux system, tested in 22.04.1 version) gcc/g++/gfrotran (c/c++/frotran compiler, tested in 11.3.0 version) python3 (tested in 3.10.6) lapack/blas (scientific computing library, tested in 3,4,2 version) mpich (realization of mpi, tested in 4.0.2 version) installation the first step is installing ubuntu system, you can install it on your pc or virtual machine (e.g.vmware).\nplease choose english as the system language if you can accpet, which is convenient for programming. you can choose the minimal installation and don\u0026rsquo;t choose any third-part software and updating opeions when installing, if you internet is not good enough. after ubuntu installation, the first thing you need to do is updating software. ubuntu uses apt gizmo to manage software, the updating command:\n# using \u0026#39;apt-get\u0026#39; to instead \u0026#39;apt\u0026#39;, if your system doesn\u0026#39;t support \u0026#39;apt\u0026#39; sudo apt update # update \u0026#39;apt\u0026#39; itself sudo apt upgrade # update software if the origin software mirror source is too late, you can change it by:\ncp /etc/apt/sources.list /etc/apt/sources.list.bak # copy old version sudo vi /etc/apt/sources.list deb http://mirrors.aliyun.com/ubuntu/ xxxx main restricted universe multiverse # change all the link, notice keep \u0026#39;xxxx\u0026#39; with your own codename some recommended sources are follows:\n# aliyun deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse # tsinghua deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse the next step is installing gcc/g++/gfrotran and python3, you can directly install them with apt:\nsudo apt install gcc sudo apt install g++ sudo apt install gfortran sudo apt install python3 if can\u0026rsquo;t find the package, you can use apt search to search it and choose the right version for installing.\nin some situation, you might meet error: configure: error: no acceptable c compiler found in $path, especially choosing minimal version when installing ubuntu. you can fix it by:sudo apt-get install -y build-essential.\nthere are two different ways about installing lapack/blas and mpich. the first is installing during the petsc configuring, which recommended by petsc official. the other is using apt.\nfor the first way, cd into the petsc\u0026rsquo;s root directory and configure with follow command:\n./configure --with-cc=gcc --with-cxx=g++ --with-fc=gfortran --download-mpich --download-fblaslapack if download fails, you can download these packages mannually from the given link in the configure message. then, indicate the download directory:\n./configure --with-cc=gcc --with-cxx=g++ --with-fc=gfortran --download-mpich --download-fblaslapack --with-download-dir=\u0026lt;xxxxx\u0026gt; after configuration, make the project:\nmake all check if you don\u0026rsquo;t have the make tool, install it by apt.\nthe second way is installing lapack/blas and mpich mannually. lapack/blas are easily to install:\nsudo apt search lapack-dev ... sudo apt install liblapack64-dev #choose the applicable version sudo apt search blas-dev ... sudo apt install libblas64-dev #choose the applicable version mpi is a cross-language communication protocol for parallel programming. mpich is one of realizations of mpi, and you can also choose openmpi to instead it:\nsudo apt install mpich #sudo apt install openmpi after that, if the $path is correct you can configure petsc directly, otherwise you need indicate the directory:\n./configure --with-cc=gcc --with-cxx=g++ --with-fc=gfortran #./configure --with-cc=gcc --with-cxx=g++ --with-fc=gfortran --with--mpich-dir=\u0026lt;xxxx\u0026gt; --with--fblaslapack-dir=\u0026lt;xxxx\u0026gt; after configuration, make the project:\nmake all check during the making process, some errors might occur such as /usr/bin/ld: cannot find -lmpi_cxx, which means lack of depended libs. you need to use apt to install them for example:\nsudo apt search lmpi ... sudo apt install libmkl-blacs-intelmpi-ilp64 #choose the applicable version after making, the message will show follows. you can re-check this information through configure.log, the petsc_dir and petsc_arch will be used in your project.\n----------------------------------------- petsc_version_release . . . ----------------------------------------- #define some_petsc_variable . . . ----------------------------------------- installed compiler, package, and library information . . . ========================================= fc arch-darwin-c-debug/obj/sys/f90-mod/petscsysmod.o fc arch-darwin-c-debug/obj/sys/fsrc/somefort.o fc arch-darwin-c-debug/obj/sys/f90-src/fsrc/f90_fwrap.o cc arch-darwin-c-debug/obj/sys/info/verboseinfo.o cc arch-darwin-c-debug/obj/sys/info/ftn-auto/verboseinfof.o cc arch-darwin-c-debug/obj/sys/info/ftn-custom/zverboseinfof.o . . . fc arch-darwin-c-debug/obj/snes/f90-mod/petscsnesmod.o fc arch-darwin-c-debug/obj/ts/f90-mod/petsctsmod.o fc arch-darwin-c-debug/obj/tao/f90-mod/petsctaomod.o clinker arch-darwin-c-debug/lib/libpetsc.petsc_major.petsc_minor.petsc_patch.dylib dsymutil arch-darwin-c-debug/lib/libpetsc.petsc_major.petsc_minor.petsc_patch.dylib gmake[2]: leaving directory \u0026#39;/your/petsc/dir\u0026#39; gmake[1]: leaving directory \u0026#39;/your/petsc/dir\u0026#39; ========================================= running test examples to verify correct installation using petsc_dir=/your/petsc/dir and petsc_arch=your-petsc-arch c/c++ example src/snes/examples/tutorials/ex19 run successfully with 1 mpi process c/c++ example src/snes/examples/tutorials/ex19 run successfully with 2 mpi processes fortran example src/snes/examples/tutorials/ex5f run successfully with 1 mpi process completed test examples installation for windows the installation of petsc for windows is not successful yet, this is just a record for the works.\nenvironment this article try msys2 and cygwin separately to build petsc：\nmsys2 (linux environment in windows, tested in 20221216.0.0 version) cygwin (linux environment in windows, tested in 1.2.1 version) test in msys2 the msys2 system uses pacman to manage packages such like apt. you need to install all the same packages in linux to msys2 by pacman. msys2 doesn\u0026rsquo;t have some base packages (e.g.make), which you also need to install. usage of pacman:\npacman -ss [package name] #search package pacman -s [package name] #install package the problem is when trying to configure petsc after installing all the packages, it will meet error:\ncould not execute \u0026#34;[\u0026#39;/bin/rpm -q diffutils\u0026#39;]\u0026#34;: /bin/sh: line 1: /bin/rpm: no such file or directory. the msys2 is a simple linux environment running on windows, which doesn\u0026rsquo;t support enough to run this command.\ntest in cygwin the cygwin system doesn\u0026rsquo;t have such as pacman or apt tool to manage packages. one of the way to get package is to re-run the cygwin-setup and to choose the needed package.\nthe other way to get the package is use apt-cyg. apt-cyg is similar to apt, but need be installed mannually:\nlynx -source rawgit.com/transcode-open/apt-cyg/master/apt-cyg \u0026gt; apt-cyg install apt-cyg /bin or you can copy the apt-cyg\u0026rsquo;s content through https://github.com/transcode-open/apt-cyg to cygwin:/bin to creat the same file and run:\nchmod +x apt-cyg the first problem except installing the base packages is cygwin can\u0026rsquo;t install mpich successfully through above ways. so i try to build it mannualy.\nfirstly, download the source of mpich from https://www.mpich.org/downloads/ and unpack the tar file (if doesn\u0026rsquo;t have tar or other tools, just install them by cygwin-setup or apt-cyg):\ntar xfz mpich.tar.gz #if tar doesn’t accept the z option, use #gunzip -c mpich.tar.gz | tar xf - let us assume that the directory where you do this is /home/you/libraries. it will now contain a subdirectory named mpich-x.x.x. choose an installation directory (the default is /usr/local/bin):\nmkdir /home/you/mpich-install choose a build directory:\nmkdir /tmp/you/mpich-x.x.x configure mpich, specifying the installation directory, and running the configure script in the source directory:\ncd /tmp/you/mpich-x.x.x /home/you/libraries/mpich-x.x.x/configure -prefix=/home/you/mpich-install |\u0026amp; tee c.txt for the cygwin\u0026rsquo;s gfortran, it will meet error:\nconfigure: error: the fortran compiler gfortran does not accept programs that call the same routine with arguments of different types without the option -fallow-argument-mismatch. rerun configure with fflags=-fallow-argument-mismatch and fcflags=-fallow-argument-mismatch change the command:\n/home/you/libraries/mpich-x.x.x/configure -prefix=/home/you/mpich-install fflags=-fallow-argument-mismatch fcflags=-fallow-argument-mismatch |\u0026amp; tee c.txt the error change to:\nconfigure: error: libfabric only builds on linux, os x, and freebsd configure: error: libfabric configure failed it seems cygwin can not support mpich yet.\nconclusion it is not to hard to and possible to change the code to windows version, because of the similarity between gcc and msvc。so the best way is to rewrite the full code instead of using virtual linux environment.\n","date":"2022-12-28","permalink":"https://kkkiona.github.io/posts/installation-petsc-2022-12-28/","summary":"","title":"installation of petsc"},]
            
        
    </div>

    <div id="search">
        
        <span class="sc-icon"><img src="/imgs/icons/search.svg" width="48"> </span>
        <span id="sc-clear" onclick="clearInputVal()">✖</span>
        <input id="sc-input" oninput="search()" type="text" placeholder="here search search..." />
        <div id="sc-res"></div>
    </div>
    <script src="/js/search.js" defer></script>
</div>

    


    
</div>

        </div>
        <div id="footer"><div class="container-footer">
    
    <a href="https://music.163.com/outchain/player?type=2&amp;id=1348896822&amp;auto=1&amp;height=66" target="_blank">
        
        你当然会幸福，毕竟我双手合十的愿望都是你。
        
    </a>
    <a id="s" href="/secrets">&nbsp;</a>
</div></div>
    </body>
</html>
